<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 EDA | Dicours Analysis</title>
  <meta name="description" content="Chapter 3 EDA | Dicours Analysis" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 EDA | Dicours Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 EDA | Dicours Analysis" />
  
  
  

<meta name="author" content="Eugénie Mathieu, Maeva Marin, Hadrien Renger, Wajma Nazim" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="similarities.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Basic introduction</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#overview-and-motivation"><i class="fa fa-check"></i><b>2.1</b> Overview and Motivation</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#data-loadind"><i class="fa fa-check"></i><b>2.2</b> Data loadind</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="eda.html"><a href="eda.html"><i class="fa fa-check"></i><b>3</b> EDA</a><ul>
<li class="chapter" data-level="3.1" data-path="eda.html"><a href="eda.html#boris-johnson"><i class="fa fa-check"></i><b>3.1</b> Boris Johnson</a></li>
<li class="chapter" data-level="3.2" data-path="eda.html"><a href="eda.html#macron"><i class="fa fa-check"></i><b>3.2</b> Macron</a></li>
<li class="chapter" data-level="3.3" data-path="eda.html"><a href="eda.html#data-manipulation"><i class="fa fa-check"></i><b>3.3</b> Data manipulation</a></li>
<li class="chapter" data-level="3.4" data-path="eda.html"><a href="eda.html#zipfs-law"><i class="fa fa-check"></i><b>3.4</b> Zipf’s law</a></li>
<li class="chapter" data-level="3.5" data-path="eda.html"><a href="eda.html#comparison"><i class="fa fa-check"></i><b>3.5</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="similarities.html"><a href="similarities.html"><i class="fa fa-check"></i><b>4</b> Similarities</a><ul>
<li class="chapter" data-level="4.1" data-path="similarities.html"><a href="similarities.html#boris"><i class="fa fa-check"></i><b>4.1</b> Boris</a></li>
<li class="chapter" data-level="4.2" data-path="similarities.html"><a href="similarities.html#macron-1"><i class="fa fa-check"></i><b>4.2</b> Macron</a></li>
<li class="chapter" data-level="4.3" data-path="similarities.html"><a href="similarities.html#comparison-1"><i class="fa fa-check"></i><b>4.3</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="topic-modelling.html"><a href="topic-modelling.html"><i class="fa fa-check"></i><b>5</b> Topic Modelling</a><ul>
<li class="chapter" data-level="5.1" data-path="topic-modelling.html"><a href="topic-modelling.html#boris-johnson-1"><i class="fa fa-check"></i><b>5.1</b> Boris Johnson</a><ul>
<li class="chapter" data-level="5.1.1" data-path="topic-modelling.html"><a href="topic-modelling.html#lsa"><i class="fa fa-check"></i><b>5.1.1</b> LSA</a></li>
<li class="chapter" data-level="5.1.2" data-path="topic-modelling.html"><a href="topic-modelling.html#lda"><i class="fa fa-check"></i><b>5.1.2</b> LDA</a></li>
<li class="chapter" data-level="5.1.3" data-path="topic-modelling.html"><a href="topic-modelling.html#lsa-1"><i class="fa fa-check"></i><b>5.1.3</b> LSA</a></li>
<li class="chapter" data-level="5.1.4" data-path="topic-modelling.html"><a href="topic-modelling.html#lda-1"><i class="fa fa-check"></i><b>5.1.4</b> LDA</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="topic-modelling.html"><a href="topic-modelling.html#comparison-2"><i class="fa fa-check"></i><b>5.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="word-embedding.html"><a href="word-embedding.html"><i class="fa fa-check"></i><b>6</b> Word Embedding</a><ul>
<li class="chapter" data-level="6.1" data-path="word-embedding.html"><a href="word-embedding.html#boris-johnson-2"><i class="fa fa-check"></i><b>6.1</b> Boris Johnson</a></li>
<li class="chapter" data-level="6.2" data-path="word-embedding.html"><a href="word-embedding.html#word-embedding-1"><i class="fa fa-check"></i><b>6.2</b> Word embedding</a></li>
<li class="chapter" data-level="6.3" data-path="word-embedding.html"><a href="word-embedding.html#macron-2"><i class="fa fa-check"></i><b>6.3</b> Macron</a></li>
<li class="chapter" data-level="6.4" data-path="word-embedding.html"><a href="word-embedding.html#comparison-3"><i class="fa fa-check"></i><b>6.4</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Dicours Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="eda" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> EDA</h1>
<p>##Data Acquisition</p>
<div id="boris-johnson" class="section level2">
<h2><span class="header-section-number">3.1</span> Boris Johnson</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">## Tokenization</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">corpus_boris &lt;-<span class="st"> </span><span class="kw">corpus</span>(boris)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">summary</span>(corpus_boris) <span class="co">###number of tokens and token types</span></a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Text
</th>
<th style="text-align:right;">
Types
</th>
<th style="text-align:right;">
Tokens
</th>
<th style="text-align:right;">
Sentences
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
text1
</td>
<td style="text-align:right;">
266
</td>
<td style="text-align:right;">
577
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
text2
</td>
<td style="text-align:right;">
409
</td>
<td style="text-align:right;">
1170
</td>
<td style="text-align:right;">
49
</td>
</tr>
<tr>
<td style="text-align:left;">
text3
</td>
<td style="text-align:right;">
405
</td>
<td style="text-align:right;">
1165
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
text4
</td>
<td style="text-align:right;">
406
</td>
<td style="text-align:right;">
1175
</td>
<td style="text-align:right;">
51
</td>
</tr>
<tr>
<td style="text-align:left;">
text5
</td>
<td style="text-align:right;">
321
</td>
<td style="text-align:right;">
904
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
text6
</td>
<td style="text-align:right;">
357
</td>
<td style="text-align:right;">
946
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
text7
</td>
<td style="text-align:right;">
300
</td>
<td style="text-align:right;">
729
</td>
<td style="text-align:right;">
33
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">corpus_boris &lt;-<span class="st"> </span><span class="kw">tokens</span>(corpus_boris, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_symbols =</span> <span class="ot">TRUE</span>, <span class="dt">remove_separators =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">## Lemmatization</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">corpus_boris &lt;-<span class="st"> </span><span class="kw">tokens_replace</span>(corpus_boris, <span class="dt">pattern=</span>hash_lemmas<span class="op">$</span>token, <span class="dt">replacement =</span> hash_lemmas<span class="op">$</span>lemma)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">## Cleaning</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">corpus_boris =<span class="st"> </span>corpus_boris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="st">  </span><span class="kw">tokens_tolower</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">  </span><span class="kw">tokens_remove</span>(<span class="kw">stopwords</span>(<span class="st">&quot;english&quot;</span>)) </a>
<a class="sourceLine" id="cb3-10" data-line-number="10"></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">## Document-Term Matrix DTM</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">corpus_boris.dfm &lt;-<span class="st"> </span><span class="kw">dfm</span>(corpus_boris)</a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="kw">View</span>(corpus_boris.dfm)</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">## TFIDF no point when just on document, maybe add when combining texts</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">corpus_boris.tfidf &lt;-<span class="st"> </span><span class="kw">dfm_tfidf</span>(corpus_boris.dfm)</a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="kw">View</span>(corpus_boris.tfidf)</a>
<a class="sourceLine" id="cb3-18" data-line-number="18"></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">## Cloud of Words</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="kw">textplot_wordcloud</span>(corpus_boris.dfm, <span class="dt">color=</span><span class="kw">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>))</a>
<a class="sourceLine" id="cb3-21" data-line-number="21"></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">## Lexical Divesity Token Type Ratio TTR</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23">N.boris &lt;-<span class="st"> </span><span class="kw">ntoken</span>(corpus_boris)</a>
<a class="sourceLine" id="cb3-24" data-line-number="24">V.boris &lt;-<span class="st"> </span><span class="kw">ntype</span>(corpus_boris)</a>
<a class="sourceLine" id="cb3-25" data-line-number="25">TTR.boris &lt;-<span class="st"> </span>V.boris<span class="op">/</span>N.boris</a>
<a class="sourceLine" id="cb3-26" data-line-number="26">TTR.boris <span class="co">###the text is quite rich, as TTR is of 0.6</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; text1 text2 text3 text4 text5 text6 text7 </span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; 0.674 0.548 0.558 0.509 0.576 0.611 0.611</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">## Zipf&#39;s Law</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31">corpus_boris_freq &lt;-<span class="st"> </span><span class="kw">textstat_frequency</span>(corpus_boris.dfm)</a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="kw">plot</span>(frequency<span class="op">~</span>rank, <span class="dt">data=</span>corpus_boris_freq, <span class="dt">pch=</span><span class="dv">20</span>)</a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="kw">ggplot</span>(corpus_boris_freq,<span class="kw">aes</span>(<span class="dt">x =</span> rank, <span class="dt">y =</span> frequency, <span class="dt">label=</span>feature)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">2</span>, <span class="dt">alpha =</span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>feature),<span class="dt">hjust=</span><span class="dv">0</span>, <span class="dt">vjust=</span><span class="dv">0</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlim</span>(<span class="dv">0</span>,<span class="dv">20</span>)</a></code></pre></div>
<p><img src="Text-Mining_files/figure-html/unnamed-chunk-46-1.png" width="70%" style="display: block; margin: auto;" /><img src="Text-Mining_files/figure-html/unnamed-chunk-46-2.png" width="70%" style="display: block; margin: auto;" /><img src="Text-Mining_files/figure-html/unnamed-chunk-46-3.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="macron" class="section level2">
<h2><span class="header-section-number">3.2</span> Macron</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># EDA</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">## Tokenization</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">corpus_macron &lt;-<span class="st"> </span><span class="kw">corpus</span>(macron)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">summary</span>(corpus_macron) <span class="co">###number of tokens and token types</span></a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Text
</th>
<th style="text-align:right;">
Types
</th>
<th style="text-align:right;">
Tokens
</th>
<th style="text-align:right;">
Sentences
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
text1
</td>
<td style="text-align:right;">
1007
</td>
<td style="text-align:right;">
3772
</td>
<td style="text-align:right;">
162
</td>
</tr>
<tr>
<td style="text-align:left;">
text2
</td>
<td style="text-align:right;">
917
</td>
<td style="text-align:right;">
2947
</td>
<td style="text-align:right;">
107
</td>
</tr>
<tr>
<td style="text-align:left;">
text3
</td>
<td style="text-align:right;">
1103
</td>
<td style="text-align:right;">
3730
</td>
<td style="text-align:right;">
107
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">corpus_macron &lt;-<span class="st"> </span><span class="kw">tokens</span>(corpus_macron, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_symbols =</span> <span class="ot">TRUE</span>, <span class="dt">remove_separators =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">## Lemmatization</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">corpus_macron &lt;-<span class="st"> </span><span class="kw">tokens_replace</span>(corpus_macron, <span class="dt">pattern=</span>hash_lemmas<span class="op">$</span>token, <span class="dt">replacement =</span> hash_lemmas<span class="op">$</span>lemma)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">## Cleaning</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">corpus_macron=corpus_macron <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">  </span><span class="kw">tokens_tolower</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="st">  </span><span class="kw">tokens_remove</span>(<span class="kw">stopwords</span>(<span class="st">&quot;english&quot;</span>)) </a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">## Document-Term Matrix DTM</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12">corpus_macron.dfm &lt;-<span class="st"> </span><span class="kw">dfm</span>(corpus_macron)</a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="kw">View</span>(corpus_macron.dfm)</a>
<a class="sourceLine" id="cb5-14" data-line-number="14"></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">## TFIDF no point when just on document, maybe add when combining texts</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16">corpus_macron.tfidf &lt;-<span class="st"> </span><span class="kw">dfm_tfidf</span>(corpus_macron.dfm)</a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="kw">View</span>(corpus_macron.tfidf)</a>
<a class="sourceLine" id="cb5-18" data-line-number="18"></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">## Cloud of Words</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="kw">textplot_wordcloud</span>(corpus_macron.dfm, <span class="dt">color=</span><span class="kw">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>))</a>
<a class="sourceLine" id="cb5-21" data-line-number="21"></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">## Lexical Divesity Token Type Ratio TTR</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23">N.macron &lt;-<span class="st"> </span><span class="kw">ntoken</span>(corpus_macron)</a>
<a class="sourceLine" id="cb5-24" data-line-number="24">N.macron</a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; text1 text2 text3 </span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt;  1730  1326  1702</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27">V.macron &lt;-<span class="st"> </span><span class="kw">ntype</span>(corpus_macron)</a>
<a class="sourceLine" id="cb5-28" data-line-number="28">V.macron</a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt; text1 text2 text3 </span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt;   714   654   832</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31">TTR.macron &lt;-<span class="st"> </span>V.macron<span class="op">/</span>N.macron</a>
<a class="sourceLine" id="cb5-32" data-line-number="32">TTR.macron <span class="co">###the text is quite poor, as TTR is of 0.4</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt; text1 text2 text3 </span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="co">#&gt; 0.413 0.493 0.489</span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">## Zipf&#39;s Law</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37">corpus_macron_freq &lt;-<span class="st"> </span><span class="kw">textstat_frequency</span>(corpus_macron.dfm)</a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="kw">plot</span>(frequency<span class="op">~</span>rank, <span class="dt">data=</span>corpus_macron_freq, <span class="dt">pch=</span><span class="dv">20</span>)</a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="kw">ggplot</span>(corpus_macron_freq,<span class="kw">aes</span>(<span class="dt">x =</span> rank, <span class="dt">y =</span> frequency, <span class="dt">label=</span>feature)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">2</span>, <span class="dt">alpha =</span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>feature),<span class="dt">hjust=</span><span class="dv">0</span>, <span class="dt">vjust=</span><span class="dv">0</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlim</span>(<span class="dv">0</span>,<span class="dv">20</span>)</a></code></pre></div>
<p><img src="Text-Mining_files/figure-html/unnamed-chunk-47-1.png" width="70%" style="display: block; margin: auto;" /><img src="Text-Mining_files/figure-html/unnamed-chunk-47-2.png" width="70%" style="display: block; margin: auto;" /><img src="Text-Mining_files/figure-html/unnamed-chunk-47-3.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="data-manipulation" class="section level2">
<h2><span class="header-section-number">3.3</span> Data manipulation</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">boris_dtm &lt;-<span class="st"> </span><span class="kw">VectorSource</span>(boris) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">VCorpus</span>() <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">DocumentTermMatrix</span>(<span class="dt">control=</span><span class="kw">list</span>(<span class="dt">removePunctuation=</span><span class="ot">TRUE</span>, <span class="dt">removeNumbers=</span><span class="ot">TRUE</span>, <span class="dt">stopwords=</span><span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">boris_tidy &lt;-<span class="st"> </span><span class="kw">tidy</span>(boris_dtm)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">boris_tidy <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">  </span><span class="kw">group_by</span>(document) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">15</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">document =</span> <span class="kw">factor</span>(<span class="kw">as.numeric</span>(document), <span class="dt">levels =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">17</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="kw">reorder_within</span>(term, count, document), count, <span class="dt">fill =</span>term)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;15 most common words in Boris Johnson&#39;s speech on March 16th&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Word&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Frequency&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="st">  </span><span class="kw">scale_x_reordered</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>document, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)</a></code></pre></div>
<p><img src="Text-Mining_files/figure-html/unnamed-chunk-48-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>#maeva aut</p>
<p>#Now let’s compute the word frequencies (TF) by documents. First, the tokens are grouped by the indicator Document, which allows to count the words by documents. The the object is ungrouped.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">#boris.fr&lt;- boris %&gt;% group_by() %&gt;% count(word,sort = TRUE) %&gt;% ungroup()</span></a></code></pre></div>
<p>#These frqeuencies are represented with barplots. We only keep the 15 most frequent words for redability purpose and create barplots using ggplot and geom_col. The facetwrap function split the barplots per Document.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">#index&lt;-top_n(boris.fr,15)</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#boris.fr%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#filter(word %in% index$word) %&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#ggplot( </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"> <span class="co"># aes(x=word,y=n))+</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"> <span class="co"># geom_col() +</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"> <span class="co"># coord_flip() +</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"> <span class="co"># facet_wrap(~Document,ncol=2)</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#boris%&gt;% group_by(Document) %&gt;% count(Text,sort=TRUE) %&gt;%ungroup()</span></a></code></pre></div>
<p>#We see that the list of 15 most frequent term are due to doc 2 ,4 and 3.</p>
<p>#Now we want to know which are the most frequent term for each document</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">#index&lt;-boris.fr %&gt;% group_by(Document) %&gt;% top_n(1)</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#boris.fr%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#filter(word %in% index$word) %&gt;%</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#ggplot( </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#  aes(x=word,y=n))+</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#  geom_col() +</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#  coord_flip() +</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co"># facet_wrap(~Document,ncol=2)</span></a></code></pre></div>
<p>#Now we repeat the same analysis using the TF-IDF.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">#boris.tfidf&lt;- bind_tf_idf(tbl=boris.fr,term=word,document=Document,n=n)</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#index&lt;-boris.tfidf %&gt;% group_by(Document) %&gt;% top_n(1)</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#boris.tfidf%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#filter(word %in% index$word) %&gt;%</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#ggplot( </span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#  aes(x=word,y=n))+</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#  geom_col() +</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#  coord_flip() +</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#  facet_wrap(~Document,ncol=2)</span></a></code></pre></div>
<p>#We can see that the term “measures” or “disease” appaear several times. It is normal since the could of words was built from the frequencies within each document. We need first to aggregate the frequencies per termms(i.e sum iver the documents). Then er produce the could</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co">#wordcloud(words=boris.fr$word,freq=boris.fr$n)</span></a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co">#boris.fr2&lt;-aggregate(n~word,FUN=sum,data = boris.fr)</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#wordcloud(words=boris.fr2$word,freq=boris.fr2$n)</span></a></code></pre></div>
</div>
<div id="zipfs-law" class="section level2">
<h2><span class="header-section-number">3.4</span> Zipf’s law</h2>
<p>#Now, we illustrate the Zipf’s law on the discous of Boris Jonhson. The terms are ranked by their frequency (rank=1 for the most frequent), then plotted versus its rank. This is easily obtained using quanteda.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">#boris.dfm&lt;- dfm(boris.tok$word)</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#boris.freq &lt;- textstat_frequency(boris.dfm)</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#plot(frequency~rank,data=boris.freq,pch=20)</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#text(frequency~rank, data=boris.freq[1:5],label=feature,pos=4)</span></a></code></pre></div>
<p>#Now on the log scale this gives a linear relation</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co">#plot(log(frequency)~log(rank),data=boris.freq,pch=20)</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#text(log(frequency)~log(rank), data=boris.freq[1:5],label=feature,pos=4)</span></a></code></pre></div>
</div>
<div id="comparison" class="section level2">
<h2><span class="header-section-number">3.5</span> Comparison</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="similarities.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
